apply plugin: 'java-library'

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

jar {
    archiveBaseName = 'apitest'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation("org.testng:testng:6.14.3")
    implementation("com.jayway.jsonpath:json-path:2.4.0")
    implementation("org.json:json:20171018")
    implementation("org.apache.poi:poi:3.17")
    implementation("org.apache.poi:poi-ooxml:3.17")
    implementation("org.apache.xmlbeans:xmlbeans:2.6.0")
    implementation("com.github.virtuald:curvesapi:1.04")
}

task copy(type: Copy) {
    from('build/libs') {
	    include '*.jar'
	}
	into ('target')

	it.dependsOn 'jar'
}

task copyDependencies(type: Copy, dependsOn: [copy]) {
    from configurations.runtimeClasspath
    into 'target'
}

build.dependsOn.add copyDependencies